<?xml version="1.0" encoding="UTF-8"?>
<editor xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="../../../../../../config-editor.xsd"
        xmlns:gn="http://www.fao.org/geonetwork"
        xmlns:gml="http://www.opengis.net/gml/3.2"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        xmlns:gcx="http://standards.iso.org/iso/19115/-3/gcx/1.0"
        xmlns:srv="http://standards.iso.org/iso/19115/-3/srv/2.0"
        xmlns:mdb="http://standards.iso.org/iso/19115/-3/mdb/1.0"
        xmlns:mcc="http://standards.iso.org/iso/19115/-3/mcc/1.0"
        xmlns:mri="http://standards.iso.org/iso/19115/-3/mri/1.0"
        xmlns:mmi="http://standards.iso.org/iso/19115/-3/mmi/1.0"
        xmlns:mrc="http://standards.iso.org/iso/19115/-3/mrc/1.0"
        xmlns:cat="http://standards.iso.org/iso/19115/-3/cat/1.0"
        xmlns:mrs="http://standards.iso.org/iso/19115/-3/mrs/1.0"
        xmlns:mrd="http://standards.iso.org/iso/19115/-3/mrd/1.0"
        xmlns:mco="http://standards.iso.org/iso/19115/-3/mco/1.0"
        xmlns:msr="http://standards.iso.org/iso/19115/-3/msr/1.0"
        xmlns:lan="http://standards.iso.org/iso/19115/-3/lan/1.0"
        xmlns:mrl="http://standards.iso.org/iso/19115/-3/mrl/1.0"
        xmlns:gex="http://standards.iso.org/iso/19115/-3/gex/1.0"
        xmlns:mdq="http://standards.iso.org/iso/19157/-2/mdq/1.0"
        xmlns:cit="http://standards.iso.org/iso/19115/-3/cit/1.0"
        xmlns:gco="http://standards.iso.org/iso/19115/-3/gco/1.0">

  <!-- Form field type configuration. Default is text. -->
  <fields>
    <for name="cit:issueIdentification" use="textarea"/>
    <for name="cit:description" use="textarea"/>
    <for name="mcc:fileDescription" use="textarea"/>
    <for name="gex:description" use="textarea"/>
    <for name="mrc:description" use="textarea"/>
    <for name="mrd:mediumNote" use="textarea"/>
    <for name="lan:description" use="textarea"/>
    <for name="mcc:description" use="textarea"/>
    <for name="msr:transformationDimensionMapping" use="textarea"/>
    <for name="msr:dimensionDescription" use="textarea"/>
    <for name="msr:orientationParameterDescription" use="textarea"/>
    <for name="cit:contactInstructions" use="textarea"/>
    <for name="mco:userNote" use="textarea"/>
    <for name="mco:handlingDescription" use="textarea"/>
    <for name="mrl:description" use="textarea"/>
    <!--for name="mri:abstract" use="textarea"/-->
    <for name="gmd:checkPointDescription" use="textarea"/>
    <for name="mri:credit" use="textarea"/>
    <for name="mrd:description" use="textarea"/>
    <for name="gmd:evaluationMethodDescription" use="textarea"/>
    <for name="gmd:explanation" use="textarea"/>
    <for name="gmd:handlingDescription" use="textarea"/>
    <for name="mdq:measureDescription" use="textarea"/>
    <for name="gmd:purpose" use="textarea"/>
    <for name="gmd:orderingInstructions" use="textarea"/>
    <for name="mco:otherConstraints" use="textarea"/>
    <for name="mri:statement" use="textarea"/>
    <for name="mri:supplementalInformation" use="textarea"/>
    <for name="gmd:specificUsage" use="textarea"/>
    <for name="gmd:userNote" use="textarea"/>
    <for name="mco:useLimitation" use="textarea"/>
    <for name="cit:otherCitationDetails" use="textarea"/>
    <for name="mmi:maintenanceNote" use="textarea"/>
    <for name="mco:statement" use="textarea"/>
    <for name="gfc:definition" use="textarea"/>
    <for name="mri:environmentDescription" use="textarea"/>
    <for name="mdq:standaloneQualityReportDetails" use="textarea"/>
    <for name="mdq:abstract" use="textarea"/>
    <for name="mdq:statement" use="textarea"/>
    <for name="mdq:evaluationMethodDescription" use="textarea"/>
    <for name="mrl:statement" use="textarea"/>
    <for name="mri:response" use="textarea"/>
    <for name="mri:specificUsage" use="textarea"/>
    <for name="mrd:orderOptions" use="textarea"/>


    <for name="gco:Distance" use="number"/>
    <for name="gco:Decimal" use="number"/>
    <for name="gco:Integer" use="number"/>
    <for name="gco:Real" use="number"/>
    <for name="gco:Angle" use="number"/>
    <for name="gco:Boolean" use="checkbox"/>


    <for name="gco:Date" use="data-gn-date-picker"/>
    <for name="gco:DateTime" use="data-gn-date-picker"/>

    <for name="mri:abstract" use="data-gn-textarea-abstract-builder"/>

    <for name="role" use="data-gn-role"/>
    <!-- gmx:FileName/@src attribute -->
    <for name="src" use="data-gn-logo-selector"/>

    <for name="cit:electronicMailAddress" use="email"/>

    <for name="lan:language" use="data-gn-language-picker"/>
    <for name="lan:languageCode" use="data-gn-language-picker"/>

    <for name="lan:country" use="data-gn-country-picker"/>
    <for name="cit:country" use="data-gn-country-picker"/>

    <for name="mrs:referenceSystemIdentifier" addDirective="data-gn-crs-selector"/>

    <for name="mdb:contact" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="false"
        data-popup-action="true"
        data-template-type="contact"
        data-filter='{"_root": "cit:CI_Responsibility"}'
        data-variables="cit:role/cit:CI_RoleCode/@codeListValue~{role}"/>
      <!--data-transformation="contact-from-iso19139-to-iso19115-3"/ ADDED IN MEDSEA-->
    </for>
    <for name="mri:pointOfContact" addDirective="data-gn-directory-entry-selector">
      <!--<directiveAttributes
              data-template-add-action="true"
              data-template-type="contact"
              data-filter='{"_root": "cit:CI_Responsibility"}'
              data-variables="cit:role/cit:CI_RoleCode/@codeListValue~{role}"/>-->
      <!-- To use an ISO19139 contact directory in an ISO19115-3 record
      use the following configuration: -->
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="false"
        data-popup-action="true"
        data-template-type="contact"
        data-filter='{"_root": "gmd:CI_ResponsibleParty"}'
        data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"
        data-transformation="contact-from-iso19139-to-iso19115-3"/>
    </for>
    <for name="mrd:distributor" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="false"
        data-popup-action="true"
        data-template-type="contact"
        data-filter='{"_root": "cit:CI_Responsibility"}'
        data-variables="cit:role/cit:CI_RoleCode/@codeListValue~{role}"/>
      <!--data-transformation="contact-from-iso19139-to-iso19115-3"/ ADDED IN MEDSEA-->
    </for>
    <for name="mrl:processor" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="false"
        data-popup-action="true"
        data-template-type="contact"
        data-filter='{"_root": "cit:CI_Responsibility"}'
        data-variables="cit:role/cit:CI_RoleCode/@codeListValue~{role}"/>
      <!--data-transformation="contact-from-iso19139-to-iso19115-3"/ ADDED IN MEDSEA-->
    </for>
    <for name="cit:citedResponsibleParty" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="false"
        data-popup-action="true"
        data-template-type="contact"
        data-filter='{"_root": "cit:CI_Responsibility"}'
        data-variables="cit:role/cit:CI_RoleCode/@codeListValue~{role}"/>
      <!--data-transformation="contact-from-iso19139-to-iso19115-3"/ ADDED IN MEDSEA-->
    </for>


    <for name="cit:logo" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="true"
        data-popup-action="false"
        data-template-type="logo"
        data-filter='{"_root": "mcc:MD_BrowseGraphic"}'/>
    </for>

    <for name="mdq:report" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="true"
        data-popup-action="false"
        data-template-type="report"
        data-filter='{"_root": "mdq:DQ_*"}'/>
    </for>

    <for name="mri:resourceConstraints" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="true"
        data-popup-action="false"
        data-template-type="resourceConstraints"
        data-filter='{"_root": "mco:MD_*"}'/>
    </for>

    <for name="mri:descriptiveKeywords" addDirective="data-gn-thesaurus-selector">
      <directiveAttributes
        data-transformation="to-iso19115-3-keyword"/>
    </for>
  </fields>


  <fieldsWithFieldset>
    <name>mdb:MD_Metadata</name>
    <name>mcc:MD_Identifier</name>
    <name>mdb:metadataStandard</name>
    <name>mdb:metadataScope</name>
    <name>mdb:dateInfo</name>
    <name>mdb:contentInfo</name>
    <name>gfc:featureType</name>
    <name>gfc:carrierOfCharacteristics</name>
    <name>gfc:listedValue</name>
    <name>mdb:alternativeMetadataReference</name>
    <name>mdb:metadataLinkage</name>
    <name>mdb:identificationInfo</name>
    <name>mdb:distributionInfo</name>
    <name>mri:descriptiveKeywords</name>
    <name>mri:thesaurusName</name>
    <name>mri:resourceConstraints</name>
    <name>mdb:spatialRepresentationInfo</name>
    <name>mri:pointOfContact</name>
    <name>mri:resourceFormat</name>
    <name>mdb:dataQualityInfo</name>
    <name>mdq:report</name>
    <name>mdq:DQ_CompletenessOmission</name>
    <name>mdq:DQ_AbsoluteExternalPositionalAccuracy</name>
    <name>mri:spatialResolution</name>
    <name>mdq:result</name>
    <name>mdb:resourceLineage</name>
    <name>cit:citedResponsibleParty</name>
    <name>cit:party</name>
    <name>cit:individual</name>
    <name>cit:logo</name>
    <name>mdb:contact</name>
    <name>mrd:onLine</name>
    <name>mdb:referenceSystemInfo</name>
    <name>mri:graphicOverview</name>
    <name>msr:projection</name>
    <name>mdb:extent</name>
    <name>cit:extent</name>
    <name>gex:verticalElement</name>
    <name>gex:geographicBox</name>
    <name>gex:EX_TemporalExtent</name>
    <name>mrd:MD_Distributor</name>
    <name>srv:containsOperations</name>
    <name>srv:SV_CoupledResource</name>
    <name>mdb:metadataConstraints</name>
    <name>mdb:portrayalCatalogueInfo</name>
    <name>mri:associatedResource</name>
  </fieldsWithFieldset>

  <multilingualFields>
    <!-- In multilingual mode, define which mode
    the widget should have. If expanded, then one
    field per language is displayed. -->
    <expanded>
      <name>cit:title</name>
      <name>cit:abstract</name>
    </expanded>
    <!-- All fields in ISO could be multilingual.
    Define element to exclude.
    TODO: it may be relevant to have parent defined
    to restrict the list.
    -->
    <exclude>
      <name>cit:protocolRequest</name>
      <name>gex:minimumValue</name>
      <name>gex:maximumValue</name>
      <name>mrc:minValue</name>
      <name>mrc:maxValue</name>
      <name>mrc:scaleFactor</name>
      <name>mrc:offset</name>
      <name>mrc:meanValue</name>
      <name>mrc:standardDeviation</name>
      <name>gco:Real</name>
      <name>mrc:numberOfValues</name>
      <name>mrc:bitsPerValue</name>
      <name>mrc:triangulationIndicator</name>
      <name>mrc:radiometricCalibrationDataAvailability</name>
      <name>mrc:filmDistortionInformationAvailability</name>
      <name>mrc:radiometricCalibrationDataAvailability</name>
      <name>mrc:cameraCalibrationInformationAvailability</name>
      <name>mrc:lensDistortionInformationAvailability</name>
      <name>mrc:complianceCode</name>
      <name>mrc:includedWithDataset</name>
      <name>mrc:featureInstanceCount</name>
      <name>gfc:uniqueInstance</name>
      <name>mrd:density</name>
      <name>mrd:densityUnits</name>
      <name>mrd:volumes</name>
      <name>mrd:unitsOfDistribution</name>
      <name>mrd:transferSize</name>
      <name>cit:linkage</name>
      <name>cit:page</name>
      <name>mco:useLimitation</name>
      <name>mri:levelOfDetail</name>
      <name>mri:distance</name>
      <name>mri:vertical</name>
      <name>mri:angularDistance</name>
      <name>msr:controlPointAvailability</name>
      <name>msr:orientationParameterAvailability</name>
      <name>mac:averageAirTemperature</name>
      <name>mac:maxRelativeHumidity</name>
      <name>mac:maxAltitude</name>
      <name>mac:meterologicalConditions</name>
      <name>mas:schemaLanguage</name>
      <name>mas:constraintLanguage</name>
      <name>gex:extentTypeCode</name>
      <name>mdq:pass</name>
      <name>mri:denominator</name>
      <name>mcc:code</name>
      <name>gfc:typeName</name>
      <name>gfc:code</name>
      <name>gfc:valueType</name>
      <name>gco:aName</name>
      <name>gfc:isAbstract</name>
      <name>mrc:illuminationElevationAngle</name>
      <name>mrc:illuminationAzimuthAngle</name>
      <name>mrc:cloudCoverPercentage</name>
      <name>mrc:compressionGenerationQuantity</name>
      <name>cit:electronicMailAddress</name>
      <name>cit:postalCode</name>
      <name>cit:city</name>
      <name>cit:administrativeArea</name>
      <name>cit:number</name>
      <name>cit:hoursOfService</name>
      <name>cit:date</name>
      <name>mac:type</name>
      <name>msr:geometricObjectCount</name>
      <name>msr:numberOfDimensions</name>
      <name>msr:checkPointAvailability</name>
      <name>msr:dimensionSize</name>
      <name>msr:resolution</name>
      <name>msr:transformationParameterAvailability</name>
      <name>mcc:fileName</name>
      <name>mcc:fileType</name>
      <name>mcc:version</name>
      <name>cit:protocol</name>
      <name>mrd:amendmentNumber</name>
      <name>mrd:fileDecompressionTechnique</name>
      <name>mcc:codeSpace</name>
      <name>cit:edition</name>
      <name>cit:ISBN</name>
      <name>cit:ISSN</name>
      <name>mex:condition</name>
      <name>mex:maximumOccurence</name>
      <name>mex:domainValue</name>
      <name>srv:name</name>
      <name>srv:invocationName</name>
      <name>srv:serviceTypeVersion</name>
      <name>srv:operationName</name>
      <name>srv:identifier</name>
    </exclude>
  </multilingualFields>


  <!-- View configuration -->
  <views>
    <view name="default">

      <sidePanel>
        <directive data-gn-onlinesrc-list=""/>
        <directive gn-geo-publisher=""
                   data-ng-if="gnCurrentEdit.geoPublisherConfig"
                   data-config="{{gnCurrentEdit.geoPublisherConfig}}"
                   data-lang="lang"/>
        <directive data-gn-validation-report=""/>
        <directive data-gn-suggestion-list=""/>
        <directive data-gn-need-help="user-guide/describing-information/creating-metadata.html"/>
      </sidePanel>

      <tab id="default" default="true" mode="flat">
        <section xpath="/mdb:MD_Metadata/mdb:identificationInfo"/>
        <section xpath="/mdb:MD_Metadata/mdb:contentInfo"/>
        <section xpath="/mdb:MD_Metadata/mdb:distributionInfo"/>
        <section xpath="/mdb:MD_Metadata/mdb:dataQualityInfo"/>
        <section xpath="/mdb:MD_Metadata/mdb:portrayalCatalogueInfo"/>
        <section name="mdb:MD_Metadata">
          <field xpath="/mdb:MD_Metadata/mdb:metadataIdentifier"/>
          <field xpath="/mdb:MD_Metadata/mdb:defaultLocale" or="defaultLocale"
                 in="/mdb:MD_Metadata"/>
          <field xpath="/mdb:MD_Metadata/mdb:otherLocale" or="otherLocale"
                 in="/mdb:MD_Metadata"/>
          <field xpath="/mdb:MD_Metadata/mdb:contact" or="contact" in="/mdb:MD_Metadata"/>
          <field xpath="/mdb:MD_Metadata/mdb:parentMetadata" or="parentMetadata"
                 in="/mdb:MD_Metadata"/>
          <field xpath="/mdb:MD_Metadata/mdb:metadataScope" or="metadataScope"
                 in="/mdb:MD_Metadata"/>
          <field xpath="/mdb:MD_Metadata/mdb:alternativeMetadataReference" or="alternativeMetadataReference"
                 in="/mdb:MD_Metadata"/>
          <field xpath="/mdb:MD_Metadata/mdb:metadataLinkage" or="metadataLinkage"
                 in="/mdb:MD_Metadata"/>
          <field xpath="/mdb:MD_Metadata/mdb:dateInfo"/>
          <field xpath="/mdb:MD_Metadata/mdb:metadataStandard"/>
          <field xpath="/mdb:MD_Metadata/mdb:metadataProfile"/>
        </section>
      </tab>

      <!-- Elements that should not use the "flat" mode -->
      <flatModeExceptions>
        <for name="mri:descriptiveKeywords"/>
        <for name="mri:pointOfContact"/>
        <for name="mrd:distributor"/>
        <for name="mdb:contact"/>
        <for name="mcc:processor"/>
        <for name="cit:party"/>
        <for name="cit:CI_Individual"/>
        <for name="cit:CI_Organisation"/>
      </flatModeExceptions>
    </view>

    <view name="metawal" upAndDownControlHidden="true">

      <sidePanel>
        <directive data-gn-onlinesrc-list=""/>
        <directive gn-geo-publisher=""
                   data-ng-if="gnCurrentEdit.geoPublisherConfig"
                   data-config="{{gnCurrentEdit.geoPublisherConfig}}"
                   data-lang="lang"/>
        <directive data-gn-validation-report=""/>
        <directive data-gn-suggestion-list=""/>
        <directive data-gn-need-help="user-guide/describing-information/creating-metadata.html"/>
      </sidePanel>

      <tab id="mw-metadata" default="true" mode="flat">
        <section name="metadataDefinition">
          <field name="metadataTitle"
                 xpath="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:citation/*/cit:title"/>


          <!-- One field and a collection of 3 actions to define
          the current record as a dataset, a serie or a service. -->
          <section name="metadataScopetitle">
            <field name="metadataScopetitle" xpath="/mdb:MD_Metadata/mdb:metadataScope/mdb:MD_MetadataScope/mdb:resourceScope"/>

            <!-- If resource scope is not define, propose to choose a type.
            This depends on the type of records. Actions for services are
            apps or service. For dataset, geodata, maps, ...
            -->
            <text ref="noMetadataScopeFound"
                  if="count(mdb:MD_Metadata/mdb:metadataScope) = 0"/>

            <action type="add"
                    btnLabel="thisIsADataset"
                    btnClass="fa gn-icon-dataset"
                    or="metadataScope"
                    in="/mdb:MD_Metadata"
                    if="(count(mdb:MD_Metadata/mdb:identificationInfo/mri:MD_DataIdentification) = 1 and
                         count(mdb:MD_Metadata/mdb:metadataScope) = 0)">
              <template>
                <snippet>
                  <mdb:metadataScope>
                    <mdb:MD_MetadataScope>
                      <mdb:resourceScope>
                        <mcc:MD_ScopeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_ScopeCode"
                                          codeListValue="dataset"/>
                      </mdb:resourceScope>
                    </mdb:MD_MetadataScope>
                  </mdb:metadataScope>
                </snippet>
              </template>
            </action>
            <action type="add"
                    btnLabel="thisIsASerie"
                    btnClass="fa gn-icon-series"
                    or="metadataScope"
                    in="/mdb:MD_Metadata"
                    if="(count(mdb:MD_Metadata/mdb:identificationInfo/mri:MD_DataIdentification) = 1 and
                         count(mdb:MD_Metadata/mdb:metadataScope) = 0)">
              <template>
                <snippet>
                  <mdb:metadataScope>
                    <mdb:MD_MetadataScope>
                      <mdb:resourceScope>
                        <mcc:MD_ScopeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_ScopeCode"
                                          codeListValue="series"/>
                      </mdb:resourceScope>
                    </mdb:MD_MetadataScope>
                  </mdb:metadataScope>
                </snippet>
              </template>
            </action>
            <action type="add"
                    btnLabel="thisIsAMap"
                    btnClass="fa gn-icon-map"
                    or="metadataScope"
                    in="/mdb:MD_Metadata"
                    if="(count(mdb:MD_Metadata/mdb:identificationInfo/mri:MD_DataIdentification) = 1 and
                         count(mdb:MD_Metadata/mdb:metadataScope) = 0)">
              <template>
                <snippet>
                  <mdb:metadataScope>
                    <mdb:MD_MetadataScope>
                      <mdb:resourceScope>
                        <mcc:MD_ScopeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_ScopeCode"
                                          codeListValue="document"/>
                      </mdb:resourceScope>
                      <mdb:name>
                        <gco:CharacterString>Carte statique</gco:CharacterString>
                      </mdb:name>
                    </mdb:MD_MetadataScope>
                  </mdb:metadataScope>
                </snippet>
              </template>
            </action>

            <action type="add"
                    btnLabel="thisIsADynMap"
                    btnClass="fa gn-icon-map"
                    or="metadataScope"
                    in="/mdb:MD_Metadata"
                    if="(count(mdb:MD_Metadata/mdb:identificationInfo/mri:MD_DataIdentification) = 1 and
                         count(mdb:MD_Metadata/mdb:metadataScope) = 0)">
              <template>
                <snippet>
                  <mdb:metadataScope>
                    <mdb:MD_MetadataScope>
                      <mdb:resourceScope>
                        <mcc:MD_ScopeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_ScopeCode"
                                          codeListValue="document"/>
                      </mdb:resourceScope>
                      <mdb:name>
                        <gco:CharacterString>Carte dynamique</gco:CharacterString>
                      </mdb:name>
                    </mdb:MD_MetadataScope>
                  </mdb:metadataScope>
                </snippet>
              </template>
            </action>

            <action type="add"
                    btnLabel="thisIsANonGeographicDataset"
                    btnClass="fa gn-icon-nonGeographicDataset"
                    or="metadataScope"
                    in="/mdb:MD_Metadata"
                    if="(count(mdb:MD_Metadata/mdb:identificationInfo/mri:MD_DataIdentification) = 1 and
                         count(mdb:MD_Metadata/mdb:metadataScope) = 0)">
              <template>
                <snippet>
                  <mdb:metadataScope>
                    <mdb:MD_MetadataScope>
                      <mdb:resourceScope>
                        <mcc:MD_ScopeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_ScopeCode"
                                          codeListValue="nonGeographicDataset"/>
                      </mdb:resourceScope>
                    </mdb:MD_MetadataScope>
                  </mdb:metadataScope>
                </snippet>
              </template>
            </action>

            <!-- This actions are only available for service metadata records. -->
            <action type="add"
                    btnLabel="thisIsAService"
                    btnClass="fa gn-icon-service"
                    or="metadataScope"
                    in="/mdb:MD_Metadata"
                    if="(count(mdb:MD_Metadata/mdb:identificationInfo/SV_ServiceIdentification) = 1 and
                         count(mdb:MD_Metadata/mdb:metadataScope) = 0)">
              <template>
                <snippet>
                  <mdb:metadataScope>
                    <mdb:MD_MetadataScope>
                      <mdb:resourceScope>
                        <mcc:MD_ScopeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_ScopeCode"
                                          codeListValue="service"/>
                      </mdb:resourceScope>
                    </mdb:MD_MetadataScope>
                  </mdb:metadataScope>
                </snippet>
              </template>
            </action>
            <action type="add"
                    btnLabel="thisIsAnApplication"
                    btnClass="fa gn-icon-application"
                    or="metadataScope"
                    in="/mdb:MD_Metadata"
                    if="(count(mdb:MD_Metadata/mdb:identificationInfo/SV_ServiceIdentification) = 1 and
                         count(mdb:MD_Metadata/mdb:metadataScope) = 0)">
              <template>
                <snippet>
                  <mdb:metadataScope>
                    <mdb:MD_MetadataScope>
                      <mdb:resourceScope>
                        <mcc:MD_ScopeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_ScopeCode"
                                          codeListValue="application"/>
                      </mdb:resourceScope>
                    </mdb:MD_MetadataScope>
                  </mdb:metadataScope>
                </snippet>
              </template>
            </action>

            <field xpath="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:citation/*/cit:identifier"/>
            <field xpath="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:citation/*/cit:identifier"
                   or="identifier"
                   in="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:citation/*"/>
            <field xpath="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:spatialRepresentationType"/>

          </section>

        </section>


        <section name="metadataIdentification">
          <field name="resourceIdentifier"
                 xpath="/mdb:MD_Metadata/mdb:metadataIdentifier/*/mcc:code"/>

          <field name="metadataLanguage"
                 xpath="/mdb:MD_Metadata/mdb:defaultLocale/*/lan:language"/>

          <!-- If not defined, add action will add French -->
          <action type="add"
                  name="metadataLanguage"
                  or="defaultLocale"
                  in="/mdb:MD_Metadata">
            <template>
              <snippet>
                <mdb:defaultLocale>
                  <lan:PT_Locale>
                    <lan:language>
                      <lan:LanguageCode codeList="codeListLocation#LanguageCode" codeListValue="fre"/>
                    </lan:language>
                    <lan:characterEncoding>
                      <lan:MD_CharacterSetCode codeList="codeListLocation#MD_CharacterSetCode"
                                               codeListValue="utf8"/>
                    </lan:characterEncoding>
                  </lan:PT_Locale>
                </mdb:defaultLocale>
              </snippet>
            </template>
          </action>

          <text ref="metadataDate-help"/>

          <field name="metadataDate"
                 xpath="/mdb:MD_Metadata/mdb:dateInfo"
                 or="dateInfo"
                 in="/mdb:MD_Metadata"
                 editInfo="no"/>
        </section>

        <section name="metadataLinks">
          <!-- TODO: here we should provide a list of services, ...
          with delete action. For this a new directive should
          be used based on the onlinesrclist one probably. -->

          <action type="associatedResource"
                  name="linkToSibling"
                  process="sibling"/>

          <action type="associatedResource"
                  name="linkToService"
                  if="count(mdb:MD_Metadata/mdb:metadataScope/mdb:MD_MetadataScope/mdb:resourceScope/mcc:MD_ScopeCode[@codeListValue = 'dataset' or @codeListValue = 'series']) > 0"
                  process="service"/>

          <action type="associatedResource"
                  name="linkToDataset"
                  if="count(descendant::srv:SV_ServiceIdentification) > 0"
                  process="dataset"/>
        </section>
      </tab>
      <tab id="mw-data" mode="flat">
        <section name="resourceDescription">
          <field name="metadataTitle"
                 xpath="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:citation/*/cit:title"/>


          <field xpath="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:citation/*/cit:alternateTitle"
                 or="alternateTitle"
                 in="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:citation/*"/>

          <field name="metadataAbstract"
                 xpath="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:abstract"
                 or="abstract"
                 in="/mdb:MD_Metadata/mdb:identificationInfo/*"/>

          <!-- TODO: add logo in Citation/graphics
          -->

          <action type="associatedResource"
                  name="addThumbnail"
                  process="onlinesrc"/>
        </section>


        <section name="resourceTags">

          <field name="infraSIGCat"
                 xpath="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:descriptiveKeywords[
                          contains(*/mri:thesaurusName/*/cit:title/gco:CharacterString,
                                       'Mots-clés InfraSIG')]"/>
          <section name="thematicsKeywords">
            <action type="add"
                    name="mw-ed-walloniaTheme"
                    forceLabel="yes"
                    or="descriptiveKeywords"
                    in="/mdb:MD_Metadata/mdb:identificationInfo/mri:MD_DataIdentification"
                    if="count(mdb:MD_Metadata/mdb:identificationInfo/*/mri:descriptiveKeywords[
                            contains(*/mri:thesaurusName/cit:CI_Citation/cit:title/gco:CharacterString,
                                     'Thèmes du géoportail wallon')]) = 0">
              <template>
                <snippet>
                  <mri:descriptiveKeywords>
                    <mri:MD_Keywords>
                      <mri:type>
                        <mri:MD_KeywordTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_KeywordTypeCode"
                                                codeListValue="theme"/>
                      </mri:type>
                      <mri:thesaurusName>
                        <cit:CI_Citation>
                          <cit:title>
                            <gco:CharacterString>Thèmes du géoportail wallon</gco:CharacterString>
                          </cit:title>
                          <cit:date>
                            <cit:CI_Date>
                              <cit:date>
                                <gco:Date>2012-06-19</gco:Date>
                              </cit:date>
                              <cit:dateType>
                                <cit:CI_DateTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode"
                                                     codeListValue="publication"/>
                              </cit:dateType>
                            </cit:CI_Date>
                          </cit:date>
                          <cit:identifier>
                            <mcc:MD_Identifier>
                              <mcc:code>
                                <gcx:Anchor xlink:href="http://metawal.wallonie.be/geonetwork/srv/fre/thesaurus.download?ref=external.theme.Themes_geoportail_wallon">geonetwork.thesaurus.external.theme.themes_geoportail_wallon</gcx:Anchor>
                              </mcc:code>
                            </mcc:MD_Identifier>
                          </cit:identifier>
                        </cit:CI_Citation>
                      </mri:thesaurusName>
                    </mri:MD_Keywords>
                  </mri:descriptiveKeywords>
                </snippet>
              </template>
            </action>

            <!-- Wallonia theme selector
            No need for a name, the thesaurus title will be used.
            -->
            <field name="keywordGeoportail"
                   xpath="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:descriptiveKeywords[
                            contains(*/mri:thesaurusName/*/cit:title/gco:CharacterString,
                                     'Thèmes du géoportail wallon')]"
                   if="count(mdb:MD_Metadata/mdb:identificationInfo/*/mri:descriptiveKeywords[
                            contains(*/mri:thesaurusName/cit:CI_Citation/cit:title/gco:CharacterString,
                                     'Thèmes du géoportail wallon')]) > 0"/>



            <!-- All other keywords -->
            <action type="add"
                    name="mw-ed-inspireTheme"
                    forceLabel="yes"
                    or="descriptiveKeywords"
                    in="/mdb:MD_Metadata/mdb:identificationInfo/mri:MD_DataIdentification"
                    if="count(mdb:MD_Metadata/mdb:identificationInfo/*/mri:descriptiveKeywords[
                            */mri:thesaurusName/cit:CI_Citation/cit:title/gco:CharacterString[text()=
                                     'GEMET - INSPIRE themes, version 1.0']]) = 0">
              <template>
                <snippet>
                  <mri:descriptiveKeywords>
                    <mri:MD_Keywords>
                      <mri:type>
                        <mri:MD_KeywordTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_KeywordTypeCode"
                                                codeListValue="theme"/>
                      </mri:type>
                      <mri:thesaurusName>
                        <cit:CI_Citation>
                          <cit:title>
                            <gco:CharacterString>GEMET - INSPIRE themes, version 1.0</gco:CharacterString>
                          </cit:title>
                          <cit:date>
                            <cit:CI_Date>
                              <cit:date>
                                <gco:Date>2008-06-01</gco:Date>
                              </cit:date>
                              <cit:dateType>
                                <cit:CI_DateTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode" codeListValue="publication"/>
                              </cit:dateType>
                            </cit:CI_Date>
                          </cit:date>
                          <cit:identifier>
                            <mcc:MD_Identifier>
                              <mcc:code>
                                <gcx:Anchor xlink:href="http://metawal.wallonie.be/geonetwork/srv/eng/thesaurus.download?ref=external.theme.inspire-theme">geonetwork.thesaurus.external.theme.inspire-theme</gcx:Anchor>
                              </mcc:code>
                            </mcc:MD_Identifier>
                          </cit:identifier>
                        </cit:CI_Citation>
                      </mri:thesaurusName>
                    </mri:MD_Keywords>
                  </mri:descriptiveKeywords>
                </snippet>
              </template>
            </action>

            <field name="keywordINSPIREtheme"
                   xpath="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:descriptiveKeywords[
                          */mri:thesaurusName/*/cit:title/gco:CharacterString[text()=
                                       'GEMET - INSPIRE themes, version 1.0']]"
                   if="count(mdb:MD_Metadata/mdb:identificationInfo/*/mri:descriptiveKeywords[
                            */mri:thesaurusName/cit:CI_Citation/cit:title/gco:CharacterString[text()=
                                     'GEMET - INSPIRE themes, version 1.0']]) > 0"/>
            <action type="add"
                    name="mw-ed-gemetTheme"
                    forceLabel="yes"
                    or="descriptiveKeywords"
                    in="/mdb:MD_Metadata/mdb:identificationInfo/mri:MD_DataIdentification"
                    if="count(mdb:MD_Metadata/mdb:identificationInfo/*/mri:descriptiveKeywords/
                      */mri:thesaurusName/cit:CI_Citation/cit:title/gco:CharacterString
                     [text()='GEMET']) = 0">
              <template>
                <snippet>
                  <mri:descriptiveKeywords>
                    <mri:MD_Keywords>
                      <mri:type>
                        <mri:MD_KeywordTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_KeywordTypeCode"
                                                codeListValue="theme"/>
                      </mri:type>
                      <mri:thesaurusName>
                        <cit:CI_Citation>
                          <cit:title>
                            <gco:CharacterString>GEMET</gco:CharacterString>
                          </cit:title>
                          <cit:date>
                            <cit:CI_Date>
                              <cit:date>
                                <gco:Date>2012-07-20</gco:Date>
                              </cit:date>
                              <cit:dateType>
                                <cit:CI_DateTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode"
                                                     codeListValue="publication"/>
                              </cit:dateType>
                            </cit:CI_Date>
                          </cit:date>
                          <cit:identifier>
                            <mcc:MD_Identifier>
                              <mcc:code>
                                <gcx:Anchor xlink:href="http://metawal.wallonie.be/geonetwork/srv/fre/thesaurus.download?ref=external.theme.gemet">geonetwork.thesaurus.external.theme.gemet</gcx:Anchor>
                              </mcc:code>
                            </mcc:MD_Identifier>
                          </cit:identifier>
                        </cit:CI_Citation>
                      </mri:thesaurusName>
                    </mri:MD_Keywords>
                  </mri:descriptiveKeywords>
                </snippet>
              </template>
            </action>

            <field name="keywordGEMET"
                   xpath="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:descriptiveKeywords[
                            */mri:thesaurusName/*/cit:title/gco:CharacterString[text()='GEMET']]"
                   if="count(mdb:MD_Metadata/mdb:identificationInfo/*/mri:descriptiveKeywords/
                            */mri:thesaurusName/cit:CI_Citation/cit:title/gco:CharacterString[text()='GEMET']) > 0"/>
          </section>

          <section name="otherKeywords">
            <field xpath="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:descriptiveKeywords[not(*/mri:thesaurusName)]/*/mri:keyword"/>

            <action type="add"
                    btnLabel="addOtherKeyword"
                    or="keyword"
                    in="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:descriptiveKeywords[not(*/mri:thesaurusName)]/mri:MD_Keywords"
                    if="count(mdb:MD_Metadata/mdb:identificationInfo/*/mri:descriptiveKeywords[not(*/mri:thesaurusName)]) > 0">
              <template>
                <snippet>
                  <mri:keyword gco:nilReason="missing">
                    <gco:CharacterString/>
                  </mri:keyword>
                </snippet>
              </template>
            </action>
          </section>
          <section name="categories">
            <field xpath="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:topicCategory"
                   del="."/>
            <action type="add"
                    btnLabel="mwAddIsoTopic"
                    in="/mdb:MD_Metadata/mdb:identificationInfo/*"
                    or="topicCategory">
              <template>
                <snippet>
                  <mri:topicCategory>
                    <mri:MD_TopicCategoryCode></mri:MD_TopicCategoryCode>
                  </mri:topicCategory>
                </snippet>
              </template>
            </action>
          </section>
        </section>

        <section>
          <field xpath="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:extent/*/gex:geographicElement/gex:EX_GeographicBoundingBox"/>
        </section>

        <section name="metawalTemporalCoverage">
          <!-- TODO: When removing the element, the element itself is not removed.
          It's just emptied.
          -->
          <field xpath="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:extent/*/gex:temporalElement"/>

          <action type="add"
                  btnLabel="addTemporalElement"
                  or="temporalElement"
                  in="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:extent/*"
                  if="count(mdb:MD_Metadata/mdb:identificationInfo/*/mri:extent/*/gex:temporalElement) = 0">
            <template>
              <snippet>
                <gex:temporalElement>
                  <gex:EX_TemporalExtent>
                    <gex:extent>
                      <gml:TimePeriod gml:id="">
                        <gml:beginPosition/>
                        <gml:endPosition/>
                      </gml:TimePeriod>
                    </gex:extent>
                  </gex:EX_TemporalExtent>
                </gex:temporalElement>
              </snippet>
            </template>
          </action>
        </section>

        <section name="resourceDate">
          <field xpath="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:citation/*/cit:date"
                 or="date"
                 in="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:citation/*"/>
        </section>
      </tab>
      <tab id="mw-quality" mode="flat">
        <!-- DQ / scope = hierarchylevel -->
        <!-- DQ / Add action Précision planimétrique / altimétrique, Absence -->
        <!-- DQ / Template for DQ planimétrique -->

        <section name="metawalScaleAndResolution">
          <!-- TODO: Support uom-->
          <field name="scale"
                 xpath="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:spatialResolution"/>

          <action type="add"
                  btnLabel="addAScale"
                  or="spatialResolution"
                  in="/mdb:MD_Metadata/mdb:identificationInfo/*"
                  if="count(mdb:MD_Metadata/mdb:identificationInfo/*/mri:spatialResolution//*/mri:equivalentScale) = 0">
            <template>
              <snippet>
                <mri:spatialResolution>
                  <mri:MD_Resolution>
                    <mri:equivalentScale>
                      <mri:MD_RepresentativeFraction>
                        <mri:denominator>
                          <gco:Integer></gco:Integer>
                        </mri:denominator>
                      </mri:MD_RepresentativeFraction>
                    </mri:equivalentScale>
                  </mri:MD_Resolution>
                </mri:spatialResolution>
              </snippet>
            </template>
          </action>

          <action type="add"
                  btnLabel="addAnotherScale"
                  or="spatialResolution"
                  in="/mdb:MD_Metadata/mdb:identificationInfo/*"
                  if="count(mdb:MD_Metadata/mdb:identificationInfo/*/mri:spatialResolution//*/mri:equivalentScale) &gt; 0">
            <template>
              <snippet>
                <mri:spatialResolution>
                  <mri:MD_Resolution>
                    <mri:equivalentScale>
                      <mri:MD_RepresentativeFraction>
                        <mri:denominator>
                          <gco:Integer></gco:Integer>
                        </mri:denominator>
                      </mri:MD_RepresentativeFraction>
                    </mri:equivalentScale>
                  </mri:MD_Resolution>
                </mri:spatialResolution>
              </snippet>
            </template>
          </action>


          <action type="add"
                  btnLabel="addAHResolution"
                  or="spatialResolution"
                  in="/mdb:MD_Metadata/mdb:identificationInfo/*"
                  if="count(mdb:MD_Metadata/mdb:identificationInfo/*/mri:spatialResolution//*/mri:distance) = 0">
            <template>
              <snippet>
                <mri:spatialResolution>
                  <mri:MD_Resolution>
                    <mri:distance>
                      <gco:Distance uom=""/>
                    </mri:distance>
                  </mri:MD_Resolution>
                </mri:spatialResolution>
              </snippet>
            </template>
          </action>



          <field xpath="/mdb:MD_Metadata/mdb:dataQualityInfo/*/mdq:report[mdq:DQ_AbsoluteExternalPositionalAccuracy]"/>

          <action type="add"
                  name="addDQReportOnAbsoluteExternalPositionalAccuracy"
                  or="report"
                  in="/mdb:MD_Metadata/mdb:dataQualityInfo/mdq:DQ_DataQuality"
                  if="count(mdb:MD_Metadata/mdb:dataQualityInfo//mdq:DQ_AbsoluteExternalPositionalAccuracy) = 0">
            <template>
              <snippet>
                <mdq:report>
                  <mdq:DQ_AbsoluteExternalPositionalAccuracy>
                    <mdq:measure>
                      <mdq:DQ_MeasureReference>
                        <mdq:nameOfMeasure>
                          <gco:CharacterString>CE95</gco:CharacterString>
                        </mdq:nameOfMeasure>
                      </mdq:DQ_MeasureReference>
                    </mdq:measure>
                    <mdq:result>
                      <mdq:DQ_QuantitativeResult>
                        <mdq:value>
                          <gco:Record>X m en planimétrie et Z m en altimétrie pour les éléments bien identifiables</gco:Record>
                        </mdq:value>
                        <mdq:valueUnit>
                          <gml:BaseUnit xmlns="http://www.opengis.net/gml/3.2" gml:id="meters">
                            <identifier codeSpace="SI">mètre</identifier>
                            <unitsSystem/>
                          </gml:BaseUnit>
                        </mdq:valueUnit>
                      </mdq:DQ_QuantitativeResult>
                    </mdq:result>
                  </mdq:DQ_AbsoluteExternalPositionalAccuracy>
                </mdq:report>
              </snippet>
            </template>
          </action>
        </section>


        <section name="metawalUpdate">
          <!-- TODO: del does not remove the parent element -->
          <field xpath="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:resourceMaintenance/mmi:MD_MaintenanceInformation/mmi:maintenanceAndUpdateFrequency"
                 or="maintenanceAndUpdateFrequency"
                 in="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:resourceMaintenance/*"/>

          <field xpath="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:resourceMaintenance/*/mmi:maintenanceNote"/>

          <action type="add"
                  btnLabel="addUpdateFrequency"
                  or="resourceMaintenance"
                  in="/mdb:MD_Metadata/mdb:identificationInfo/*"
                  if="count(mdb:MD_Metadata/mdb:identificationInfo/*/mri:resourceMaintenance) = 0">
            <template>
              <snippet>
                <mri:resourceMaintenance>
                  <mmi:MD_MaintenanceInformation>
                    <mmi:maintenanceAndUpdateFrequency>
                      <mmi:MD_MaintenanceFrequencyCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_MaintenanceFrequencyCode"
                                                       codeListValue=""/>
                    </mmi:maintenanceAndUpdateFrequency>
                    <mmi:maintenanceNote gco:nilReason="missing">
                      <gco:CharacterString/>
                    </mmi:maintenanceNote>
                  </mmi:MD_MaintenanceInformation>
                </mri:resourceMaintenance>
              </snippet>
            </template>
          </action>
        </section>

        <section name="metawalLineage">
          <field xpath="/mdb:MD_Metadata/mdb:resourceLineage/*/mrl:statement"/>

          <action type="associatedResource"
                  name="linkToSource"
                  process="source"/>

          <field xpath="/mdb:MD_Metadata/mdb:dataQualityInfo/*/mdq:report[mdq:DQ_CompletenessOmission]"/>

          <action type="add"
                  name="addDQReportOnDQ_CompletenessOmission"
                  or="report"
                  in="/mdb:MD_Metadata/mdb:dataQualityInfo/mdq:DQ_DataQuality"
                  if="count(mdb:MD_Metadata/mdb:dataQualityInfo//mdq:DQ_CompletenessOmission) = 0">
            <template>
              <snippet>
                <mdq:report>
                  <mdq:DQ_CompletenessOmission>
                    <mdq:result>
                      <mdq:DQ_QuantitativeResult>
                        <mdq:value>
                          <gco:Record></gco:Record>
                        </mdq:value>
                        <mdq:valueUnit>
                          <gml:BaseUnit xmlns="http://www.opengis.net/gml/3.2" gml:id="d445811e712a1053982">
                            <identifier codeSpace="SI">pourcents</identifier>
                            <unitsSystem>%</unitsSystem>
                          </gml:BaseUnit>
                        </mdq:valueUnit>
                        <mdq:valueRecordType>
                          <gco:RecordType/>
                        </mdq:valueRecordType>
                      </mdq:DQ_QuantitativeResult>
                    </mdq:result>
                  </mdq:DQ_CompletenessOmission>
                </mdq:report>
              </snippet>
            </template>
          </action>
        </section>
      </tab>
      <tab id="mw-access" mode="flat">
        <section name="mw-data-access">
          <text ref="mw-data-access-help"/>

          <!-- TODO: Format may be associated with a distributor or not ? -->
          <field name="format"
                 xpath="/mdb:MD_Metadata/mdb:distributionInfo/mrd:MD_Distribution/mrd:distributionFormat/mrd:MD_Format/mrd:formatSpecificationCitation"/>

          <action type="add"
                  btnLabel="addAnotherFormat"
                  or="distributionFormat"
                  in="/mdb:MD_Metadata/mdb:distributionInfo/mrd:MD_Distribution">
            <template>
              <snippet>
                <mrd:distributionFormat>
                  <mrd:MD_Format>
                    <mrd:formatSpecificationCitation>
                      <cit:CI_Citation>
                        <cit:title>
                          <gco:CharacterString></gco:CharacterString>
                        </cit:title>
                      </cit:CI_Citation>
                    </mrd:formatSpecificationCitation>
                  </mrd:MD_Format>
                </mrd:distributionFormat>
              </snippet>
            </template>
          </action>



          <field xpath="/mdb:MD_Metadata/mdb:referenceSystemInfo"
                 or="referenceSystemInfo"
                 in="/mdb:MD_Metadata"/>
        </section>

        <section name="mw-feature-catalogue">
          <text ref="mw-feature-catalogue-help"
                if="count(mdb:MD_Metadata/mdb:contentInfo) = 0"/>

          <!--
           TODO: Add a tab for editing the feature catalogue
           TODO: do not display actions if a feature catalog is already set by an onlineSource
          -->
          <action type="associatedResource"
                  name="addALinkToFeatureCatalogue"
                  process="fcats"
                  if="count(mdb:MD_Metadata/mdb:contentInfo) = 0"/>


          <action type="add"
                  btnLabel="addAFeatureCatalogue"
                  or="contentInfo"
                  in="/mdb:MD_Metadata"
                  if="count(mdb:MD_Metadata/mdb:contentInfo) = 0">
            <template>
              <snippet>
                <mdb:contentInfo>
                  <mrc:MD_FeatureCatalogue>
                    <mrc:featureCatalogue>
                      <gfc:FC_FeatureCatalogue xmlns:gfc="http://standards.iso.org/iso/19110/gfc/1.1">
                        <cat:name gco:nilReason="missing">
                          <gco:CharacterString/>
                        </cat:name>
                        <cat:scope gco:nilReason="missing">
                          <gco:CharacterString/>
                        </cat:scope>
                        <cat:versionNumber gco:nilReason="missing">
                          <gco:CharacterString/>
                        </cat:versionNumber>
                        <gfc:featureType>
                          <gfc:FC_FeatureType>
                            <gfc:typeName>Nom de la table</gfc:typeName>
                            <gfc:code>
                              <gco:CharacterString>Nom de la table dans la base de données</gco:CharacterString>
                            </gfc:code>
                            <gfc:isAbstract>
                              <gco:Boolean/>
                            </gfc:isAbstract>
                            <gfc:carrierOfCharacteristics>
                              <gfc:FC_FeatureAttribute>
                                <gfc:memberName>Nom de l'attribut</gfc:memberName>
                                <gfc:definition gco:nilReason="missing">
                                  <gco:CharacterString/>
                                </gfc:definition>
                                <gfc:cardinality>
                                  <gco:CharacterString>0..1</gco:CharacterString>
                                </gfc:cardinality>
                                <gfc:valueType>
                                  <gco:TypeName>
                                    <gco:aName>
                                      <gco:CharacterString>CHARACTER</gco:CharacterString>
                                    </gco:aName>
                                  </gco:TypeName>
                                </gfc:valueType>
                              </gfc:FC_FeatureAttribute>
                            </gfc:carrierOfCharacteristics>
                            <gfc:featureCatalogue/>
                          </gfc:FC_FeatureType>
                        </gfc:featureType>
                      </gfc:FC_FeatureCatalogue>
                    </mrc:featureCatalogue>
                  </mrc:MD_FeatureCatalogue>
                </mdb:contentInfo>
              </snippet>
            </template>
          </action>

        </section>

        <section name="constraints">
          <field xpath="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:resourceConstraints/mco:MD_LegalConstraints/mco:accessConstraints"/>
          <field xpath="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:resourceConstraints/mco:MD_LegalConstraints/mco:useConstraints"/>
          <field xpath="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:resourceConstraints/mco:MD_LegalConstraints/mco:otherConstraints"/>
          <!-- TODO: Probably provide a add action to add a default value if none defined. -->
        </section>

        <section name="mw-data-online-access">
          <text ref="mw-data-online-access-help"/>

          <field xpath="/mdb:MD_Metadata/mdb:distributionInfo/mrd:MD_Distribution/mrd:distributionFormat/mrd:MD_Format/mrd:formatDistributor/mrd:MD_Distributor/mrd:distributionOrderProcess" or="distributionOrderProcess"
                 in="/mdb:MD_Metadata/mdb:distributionInfo/mrd:MD_Distribution/mrd:distributionFormat/mrd:MD_Format/mrd:formatDistributor/mrd:MD_Distributor"/>

          <action type="associatedResource"
                  name="linkToService"
                  process="service"/>

          <action type="associatedResource"
                  process="onlinesrc"/>
        </section>
      </tab>
      <tab id="mw-content" mode="flat">
        <!-- TODO: Do not display tab if a service -->
        <section xpath="/mdb:MD_Metadata/mdb:contentInfo"/>
      </tab>
      <tab id="mw-contact" mode="flat">
        <!-- View all type of contacts and
        allows to add one if not present with or and in attribute and
        allows adding more than one by adding flatModeException.
        -->
        <section name="mw-access-contact">
          <field xpath="/mdb:MD_Metadata/mdb:distributionInfo/mrd:MD_Distribution/mrd:distributor"
                 or="distributor"
                 in="/mdb:MD_Metadata/mdb:distributionInfo/mrd:MD_Distribution"/>
        </section>

        <section name="mw-data-contact">
          <field xpath="/mdb:MD_Metadata/mdb:identificationInfo/mri:MD_DataIdentification/mri:pointOfContact"
                 in="pointOfContact"
                 or="/mdb:MD_Metadata/mdb:identificationInfo/mri:MD_DataIdentification"/>
        </section>

        <section name="mw-metadata-contact">
          <field xpath="/mdb:MD_Metadata/mdb:contact"
                 or="contact"
                 in="/mdb:MD_Metadata"/>

          <!-- TODO: Add a suggestion for this !!-->
          <action type="add"
                  btnLabel="iamthecontact"/>
        </section>

      </tab>
      <tab id="mw-inspire" mode="flat"
           displayIfRecord="count(//mri:keyword/*[. = 'Reporting INSPIRE']) = 1">
        <section name="inspiremainsection">
          <field name="keywordsInpire"
                 xpath="/mdb:MD_Metadata/mdb:identificationInfo/*/mri:descriptiveKeywords[contains(*/mri:thesaurusName/cit:CI_Citation/cit:title/gco:CharacterString,'INSPIRE themes')]"/>

          <section name="conformityInpire">
            <!-- TODO: That is not enough, a add action needs to be added to provide a default report. -->
            <field xpath="/mdb:MD_Metadata/mdb:dataQualityInfo/*/mdq:report[
                              .//mdq:specification/*/cit:title/gco:CharacterString[contains(text(), '1089/2010')]
                              ]" />

            <action type="add"
                    btnLabel="isINSPIREConform"
                    btnClass="fa fa-thumbs-o-up text-success"
                    or="report"
                    in="/mdb:MD_Metadata/mdb:dataQualityInfo/mdq:DQ_DataQuality"
                    if="count(mdb:MD_Metadata/mdb:dataQualityInfo//mdq:DQ_DomainConsistency[
                              .//mdq:specification/*/cit:title/gco:CharacterString[contains(text(), '1089/2010')]
                              ]) = 0">
              <template>
                <snippet>
                  <mdq:report>
                    <mdq:DQ_DomainConsistency>
                      <mdq:result>
                        <mdq:DQ_ConformanceResult>
                          <mdq:specification>
                            <cit:CI_Citation>
                              <cit:title>
                                <gco:CharacterString>RÈGLEMENT (UE) N o 1089/2010 DE LA COMMISSION du 23 novembre 2010 portant modalités d'application de la directive 2007/2/CE du Parlement européen et du Conseil en ce qui concerne l'interopérabilité des séries et des services de données géographiques</gco:CharacterString>
                              </cit:title>
                            </cit:CI_Citation>
                          </mdq:specification>
                          <mdq:explanation gco:nilReason="missing">
                            <gco:CharacterString/>
                          </mdq:explanation>
                          <mdq:pass>
                            <gco:Boolean>true</gco:Boolean>
                          </mdq:pass>
                        </mdq:DQ_ConformanceResult>
                      </mdq:result>
                    </mdq:DQ_DomainConsistency>
                  </mdq:report>
                </snippet>
              </template>
            </action>

            <action type="add"
                    btnLabel="isNotINSPIREConform"
                    btnClass="fa fa-thumbs-o-down text-danger"
                    or="report"
                    in="/mdb:MD_Metadata/mdb:dataQualityInfo/mdq:DQ_DataQuality"
                    if="count(mdb:MD_Metadata/mdb:dataQualityInfo//mdq:DQ_DomainConsistency[
                              .//mdq:specification/*/cit:title/gco:CharacterString[contains(text(), '1089/2010')]
                              ]) = 0">
              <template>
                <snippet>
                  <mdq:report>
                    <mdq:DQ_DomainConsistency>
                      <mdq:result>
                        <mdq:DQ_ConformanceResult>
                          <mdq:specification>
                            <cit:CI_Citation>
                              <cit:title>
                                <gco:CharacterString>RÈGLEMENT (UE) N o 1089/2010 DE LA COMMISSION du 23 novembre 2010 portant modalités d'application de la directive 2007/2/CE du Parlement européen et du Conseil en ce qui concerne l'interopérabilité des séries et des services de données géographiques</gco:CharacterString>
                              </cit:title>
                            </cit:CI_Citation>
                          </mdq:specification>
                          <mdq:explanation gco:nilReason="missing">
                            <gco:CharacterString/>
                          </mdq:explanation>
                          <mdq:pass>
                            <gco:Boolean>false</gco:Boolean>
                          </mdq:pass>
                        </mdq:DQ_ConformanceResult>
                      </mdq:result>
                    </mdq:DQ_DomainConsistency>
                  </mdq:report>
                </snippet>
              </template>
            </action>
          </section>
        </section>
      </tab>
      <flatModeExceptions>
        <for name="mri:descriptiveKeywords"/>
        <for name="mri:topicCategory"/>
        <for name="mrd:distributor"/>
        <for name="gfc:carrierOfCharacteristics"/>
        <for name="gfc:listedValue"/>
        <for name="mri:pointOfContact"/>
        <for name="mdb:contact"/>
        <for name="mrd:distributorContact"/>
        <for name="mcc:processor"/>
      </flatModeExceptions>
      <thesaurusList>
        <thesaurus key="external.theme.inspire-theme" transformations="to-iso19115-3-keyword"/>
        <thesaurus key="external.theme.gemet" transformations="to-iso19115-3-keyword"/>
        <thesaurus key="external.theme.infraSIG" transformations="to-iso19115-3-keyword"/>
        <thesaurus key="external.theme.themes_geoportail_wallon" transformations="to-iso19115-3-keyword"/>
        <thesaurus key="external.theme.Themes_geoportail_wallon" transformations="to-iso19115-3-keyword"/>
      </thesaurusList>
    </view>

    <view name="advanced">

      <sidePanel>
        <directive data-gn-onlinesrc-list=""/>
        <directive gn-geo-publisher=""
                   data-ng-if="gnCurrentEdit.geoPublisherConfig"
                   data-config="{{gnCurrentEdit.geoPublisherConfig}}"
                   data-lang="lang"/>
        <directive data-gn-validation-report=""/>
        <directive data-gn-suggestion-list=""/>
        <directive data-gn-need-help="user-guide/describing-information/creating-metadata.html"/>
      </sidePanel>

      <tab id="identificationInfo" default="true">
        <section xpath="/mdb:MD_Metadata/mdb:identificationInfo" or="identificationInfo"
                 in="/mdb:MD_Metadata"/>
      </tab>
      <tab id="contentInfo">
        <section xpath="/mdb:MD_Metadata/mdb:contentInfo" or="contentInfo" in="/mdb:MD_Metadata"/>
      </tab>
      <tab id="distributionInfo">
        <section xpath="/mdb:MD_Metadata/mdb:distributionInfo" or="distributionInfo"
                 in="/mdb:MD_Metadata"/>
      </tab>
      <!--
      mdb:distributionInfo/mrd:MD_Distribution/mrd:transferOptions/mrd:MD_DigitalTransferOptions
      -->
      <tab id="dataQualityInfo">
        <section xpath="/mdb:MD_Metadata/mdb:dataQualityInfo" or="dataQualityInfo"
                 in="/mdb:MD_Metadata"/>
      </tab>
      <!--
      Example to display a table view of quality measures.
      <tab id="qualityMeasures">
        <section>
          <xsl xpath="/mdb:MD_Metadata/mdb:dataQualityInfo"
               or="report"
               mode="iso19115-3-qm"/>
        </section>
      </tab>-->
      <tab id="resourceLineage">
        <section xpath="/mdb:MD_Metadata/mdb:resourceLineage" or="resourceLineage"
                 in="/mdb:MD_Metadata"/>
      </tab>
      <tab id="spatialRepresentationInfo">
        <section xpath="/mdb:MD_Metadata/mdb:spatialRepresentationInfo"
                 or="spatialRepresentationInfo" in="/mdb:MD_Metadata"/>
      </tab>
      <tab id="referenceSystemInfo">
        <section xpath="/mdb:MD_Metadata/mdb:referenceSystemInfo" or="referenceSystemInfo"
                 in="/mdb:MD_Metadata"/>
      </tab>
      <tab id="acquisitionInformation" toggle="true">
        <section xpath="/mdb:MD_Metadata/mdb:acquisitionInformation" or="acquisitionInformation"
                 in="/mdb:MD_Metadata"/>
      </tab>
      <tab id="metadata">
        <section name="mdb:MD_Metadata">
          <field xpath="/mdb:MD_Metadata/mdb:metadataIdentifier"/>
          <field xpath="/mdb:MD_Metadata/mdb:defaultLocale" or="defaultLocale"
                 in="/mdb:MD_Metadata"/>
          <field xpath="/mdb:MD_Metadata/mdb:otherLocale" or="otherLocale"
                 in="/mdb:MD_Metadata"/>
          <field xpath="/mdb:MD_Metadata/mdb:contact" or="contact"
                 in="/mdb:MD_Metadata"/>
          <field xpath="/mdb:MD_Metadata/mdb:parentMetadata" or="parentMetadata"
                 in="/mdb:MD_Metadata"/>
          <field xpath="/mdb:MD_Metadata/mdb:metadataScope" or="metadataScope"
                 in="/mdb:MD_Metadata"/>
          <field xpath="/mdb:MD_Metadata/mdb:alternativeMetadataReference" or="alternativeMetadataReference"
                 in="/mdb:MD_Metadata"/>
          <field xpath="/mdb:MD_Metadata/mdb:metadataLinkage" or="metadataLinkage"
                 in="/mdb:MD_Metadata"/>
          <field xpath="/mdb:MD_Metadata/mdb:dateInfo" or="dateInfo"
                 in="/mdb:MD_Metadata"/>
          <field xpath="/mdb:MD_Metadata/mdb:metadataStandard"/>
          <field xpath="/mdb:MD_Metadata/mdb:metadataProfile"/>
        </section>
      </tab>
      <tab id="portrayalCatalogueInfo" toggle="true">
        <section xpath="/mdb:MD_Metadata/mdb:portrayalCatalogueInfo" or="portrayalCatalogueInfo"
                 in="/mdb:MD_Metadata"/>
      </tab>
      <tab id="metadataConstraints" toggle="true">
        <section xpath="/mdb:MD_Metadata/mdb:metadataConstraints" or="metadataConstraints"
                 in="/mdb:MD_Metadata"/>
      </tab>
      <tab id="metadataMaintenance" toggle="true">
        <section xpath="/mdb:MD_Metadata/mdb:metadataMaintenance" or="metadataMaintenance"
                 in="/mdb:MD_Metadata"/>
      </tab>
      <tab id="applicationSchemaInfo" toggle="true">
        <section xpath="/mdb:MD_Metadata/mdb:applicationSchemaInfo" or="applicationSchemaInfo"
                 in="/mdb:MD_Metadata"/>
      </tab>
    </view>
    <view name="xml">

      <sidePanel>
        <directive data-gn-onlinesrc-list=""/>
        <directive gn-geo-publisher=""
                   data-ng-if="gnCurrentEdit.geoPublisherConfig"
                   data-config="{{gnCurrentEdit.geoPublisherConfig}}"
                   data-lang="lang"/>
        <directive data-gn-validation-report=""/>
        <directive data-gn-suggestion-list=""/>
        <directive data-gn-need-help="user-guide/describing-information/creating-metadata.html"/>
      </sidePanel>

      <tab id="xml" default="true"/>
    </view>
  </views>

  <batchEditing>
    <section name="identification">
      <!-- Update existing title in metadata record -->
      <field name="title"
             xpath="mdb:identificationInfo/*/
                      mri:citation/*/cit:title"
             indexField="title">
        <template><![CDATA[<gco:CharacterString xmlns:gco='http://standards.iso.org/iso/19115/-3/gco/1.0'>{{value}}</gco:CharacterString>]]></template>
      </field>

      <!-- Insert a new keyword in the first gmd:descriptiveKeywords found.
      Warning: The section may contains a thesaurusName reference and
      the keyword may not be part of it.
      Warning: Duplicates may be inserted.
      -->
      <field name="keyword"
             xpath="mdb:identificationInfo/*/
                      mri:descriptiveKeywords/*/mri:keyword"
             indexField="keyword"
             insertMode="gn_create">
        <template><![CDATA[<gco:CharacterString xmlns:gco='http://standards.iso.org/iso/19115/-3/gco/1.0'>{{value}}</gco:CharacterString>]]></template>
      </field>

      <!-- Insert a new topic category
      Warning: Duplicates may be inserted.
      -->
      <field name="topicCats"
             xpath="mri:identificationInfo/*/
                      mri:topicCategory"
             use="data-gn-codelist-picker"
             codelist="mri:MD_TopicCategoryCode"
             indexField="topicCat"
             insertMode="gn_create">
        <template><![CDATA[<mri:MD_TopicCategoryCode xmlns:mri='http://standards.iso.org/iso/19115/-3/mri/1.0'>{{value}}</mri:MD_TopicCategoryCode>]]></template>
      </field>

      <!-- Insert a new extent
      Warning: Duplicates may be inserted.
      -->
      <field name="extent"
             xpath="mri:identificationInfo/*/mri:extent"
             use="data-gn-draw-bbox"
             insertMode="gn_create"/>

      <!-- Insert a new resource language
      Warning: Duplicates may be inserted.
      -->
      <field name="language"
             xpath="mri:identificationInfo/*/mri:defaultLocale/*/lan:language"
             use="data-gn-language-picker"
             insertMode="gn_replace"
             removable="true">
        <template><![CDATA[<lan:LanguageCode xmlns:lan='http://standards.iso.org/iso/19115/-3/lan/1.0' codeListValue='{{value}}'/>]]></template>
      </field>


      <field name="resourceStatus"
             xpath="mri:identificationInfo/*/
                      mri:status"
             use="data-gn-codelist-picker"
             codelist="mcc:MD_ProgressCode"
             insertMode="gn_replace"
             removable="true">
        <template><![CDATA[<mcc:MD_ProgressCode xmlns:mcc='http://standards.iso.org/iso/19115/-3/mcc/1.0' codeListValue='{{value}}'/>]]></template>
      </field>
    </section>

    <section name="resourceConstraints">
      <!-- Insert a new access contraints
            Warning: Duplicates may be inserted.
      -->
      <field name="legalConstraints"
             xpath="mri:identificationInfo/*/
                      mri:resourceConstraints/mco:MD_LegalConstraints/
                        mco:accessConstraints"
             use="data-gn-codelist-picker"
             codelist="mco:MD_RestrictionCode"
             insertMode="gn_create"
             removable="true">
        <template><![CDATA[<mco:MD_RestrictionCode xmlns:mco='http://standards.iso.org/iso/19115/-3/mco/1.0' codeListValue='{{value}}'/>]]></template>
      </field>

      <!-- Insert a new other contraints
            Warning: Duplicates may be inserted.
      -->
      <field name="otherConstraints"
             xpath="mri:identificationInfo/*/
                      mco:resourceConstraints/mco:MD_LegalConstraints/
                        mco:otherConstraints"
             use="textarea"
             insertMode="gn_create"
             removable="true">
        <template><![CDATA[<gco:CharacterString xmlns:gco='http://standards.iso.org/iso/19115/-3/gco/1.0'>{{value}}</gco:CharacterString>]]></template>
      </field>
    </section>


    <!-- Replace current lineage or insert a new one.
          Warning: Duplicates may be inserted.
    -->
    <section name="quality">
      <field name="lineage"
             xpath="mdb:resourceLineage/mrl:LI_Lineage/mrl:statement"
             use="textarea"
             insertMode="gn_replace"
             removable="true">
        <template><![CDATA[<gco:CharacterString xmlns:gco='http://standards.iso.org/iso/19115/-3/gco/1.0'>{{value}}</gco:CharacterString>]]></template>
      </field>
    </section>

    <section name="contact">
      <field name="resourceContact"
             xpath="mdb:identificationInfo/*/mri:pointOfContact"
             use="data-gn-directory-entry-selector"
             insertMode="gn_create"/>
      <field name="distributor"
             xpath="mdb:distributionInfo/mrd:MD_Distribution/mrd:distributor/mrd:MD_Distributor/mrd:distributorContact"
             use="data-gn-directory-entry-selector"
             insertMode="gn_create"/>
      <field name="mdContact"
             xpath="mdb:contact"
             use="data-gn-directory-entry-selector"
             insertMode="gn_create"/>
    </section>

    <section name="metadata">
      <field name="mdLanguage"
             xpath="mdb:defaultLocale/lan:PT_Locale/lan:language"
             use="data-gn-language-picker"
             removable="true">
        <template><![CDATA[<lan:LanguageCode xmlns:lan='http://standards.iso.org/iso/19115/-3/lan/1.0' codeListValue='{{value}}'/>]]></template>
      </field>
    </section>
  </batchEditing>
</editor>
